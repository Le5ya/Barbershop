(()=>{"use strict";const e=e=>{const t=document.createElement("div");e.classList.add("d-block"),t.classList.add("modal-backdrop"),t.classList.add("fade"),document.body.append(t),e.classList.add("d-block"),setTimeout((()=>{t.classList.add("show"),e.classList.add("show")}),100)},t=e=>{const t=document.querySelector(".modal-backdrop");e.classList.remove("show"),t&&t.classList.remove("show"),setTimeout((()=>{e.classList.remove("d-block"),t&&t.remove()}),500)},o=e=>fetch("http://localhost:3001"+e).then((e=>{if(!e.ok)throw new Error;return e.json()}));(()=>{const s=document.getElementById("open-auth-btn"),n=document.getElementById("open-cart-btn"),c=document.getElementById("logout-btn"),a=document.getElementById("auth-modal"),d=a.querySelectorAll(".close-btn"),l=a.querySelector(".login-btn"),r=a.querySelector(".cart-modal"),i=()=>{s.classList.add("d-none"),n.classList.remove("d-none"),c.classList.remove("d-none"),t(a)};s.addEventListener("click",(()=>{e(a)})),d.forEach((e=>{e.addEventListener("click",(()=>{t(a)}))})),l.addEventListener("click",(()=>{const e=a.querySelector("#login-control"),t=a.querySelector("#password-control"),s=e.value,n=t.value;o("/profile").then((e=>{e.login&&e.login===s&&e.password&&e.password===n?(localStorage.setItem("auth",JSON.stringify(e)),i()):alert("none")}))})),c.addEventListener("click",(()=>{localStorage.removeItem("auth"),s.classList.remove("d-none"),n.classList.add("d-none"),c.classList.add("d-none")})),n.addEventListener("click",(()=>{e(r)})),(()=>{const e=JSON.parse(localStorage.getItem("auth"));e&&o("/profile").then((t=>{t.login&&t.login===e.login&&t.password&&t.password===e.password&&i()}))})()})(),(()=>{const e=document.getElementById("categories-container");o("/categories").then((t=>{(t=>{t.forEach((t=>{e.insertAdjacentHTML("beforeend",`\n            <div class="col col-12 col-md-6 col-lg-4 mb-3">\n            <a href="/catalog.html?id=${t.id}" class="card-link">\n                <div class="card">\n                    <img src="${t.preview}" class="card-img-top" alt="phones">\n                    <div class="card-body">\n                        <h5 class="card-title">${t.name}</h5>\n                    </div>\n                </div>\n            </a>\n        </div>\n            `)}))})(t)})).catch((e=>{console.error("Произошла ошибка")}))})()})();